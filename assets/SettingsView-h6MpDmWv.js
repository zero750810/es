import{a,r as e,c as l,j as t,e as s,f as n,i,F as c,g as o,t as u,y as d,z as v,A as p,C as r,n as y,o as b}from"./vue-CVAoqndi.js";import{a as m,b as g,_ as f}from"./index-__4lFO6p.js";import"./vendor-C7jwa7K6.js";const k={class:"settings-view"},h={class:"settings-container"},C={class:"settings-section"},w={class:"tab-navigation"},j=["onClick"],_={class:"tag-content"},A={class:"content-header"},I={key:0,class:"loading-state"},x={key:1,class:"empty-state"},L={key:2,class:"tags-grid"},P={class:"tag-info"},T={class:"tag-description"},V={class:"tag-actions"},q=["onClick"],S=["onClick"],U={class:"modal-header"},z={class:"form-group"},F={class:"form-group"},B=["value"],D={class:"form-actions"},E=["disabled"],G=f(a({__name:"SettingsView",setup(a){const f=m(),G=g(),H=e("supplier"),J=e(!1),K=e(!1),M=e(null),N=l(()=>G.loading.value),O=[{type:"supplier",label:"‰æõÊáâÂïÜÂàÜÈ°û",icon:"üè≠"},{type:"inventory",label:"Â∫´Â≠òÊùêÊñôÂàÜÈ°û",icon:"üì¶"},{type:"crm",label:"ÂÆ¢Êà∂ÂàÜÈ°û",icon:"üë•"},{type:"project",label:"Â∞àÊ°àÂàÜÈ°û",icon:"üìã"}],Q=e({name:"",type:"supplier"}),R=l(()=>f.tags.filter(a=>a.type===H.value)),W=()=>{const a=O.find(a=>a.type===H.value);return(null==a?void 0:a.label)||"Êú™Áü•ÂàÜÈ°û"},X=()=>{J.value=!1,K.value=!1,M.value=null,Q.value={name:"",type:H.value}},Y=async()=>{try{J.value?await G.callAPI({table:"tag",action:"create",data:Q.value}):M.value&&await G.callAPI({table:"tag",action:"update",data:{id:M.value.id,...Q.value}}),await f.fetchTagList(),X()}catch(a){alert("ÂÑ≤Â≠òÂ§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶")}};return t(async()=>{await f.fetchTagList(),Q.value.type=H.value}),(a,e)=>(b(),s("div",k,[e[11]||(e[11]=n("div",{class:"page-header"},[n("h1",null,"Á≥ªÁµ±Ë®≠ÂÆö")],-1)),n("div",h,[n("div",C,[e[7]||(e[7]=n("h2",null,"Ê®ôÁ±§ÂàÜÈ°ûÁÆ°ÁêÜ",-1)),e[8]||(e[8]=n("p",{class:"section-description"},"ÁÆ°ÁêÜÁ≥ªÁµ±‰∏≠ÁöÑÂêÑÁ®ÆÂàÜÈ°ûÊ®ôÁ±§",-1)),n("div",w,[(b(),s(c,null,o(O,a=>n("button",{key:a.type,onClick:e=>H.value=a.type,class:y(["tab-btn",{active:H.value===a.type}])},u(a.icon)+" "+u(a.label),11,j)),64))]),n("div",_,[n("div",A,[n("h3",null,u(W()),1),n("button",{onClick:e[0]||(e[0]=a=>J.value=!0),class:"add-btn"}," ‚ûï Êñ∞Â¢ûÊ®ôÁ±§ ")]),N.value?(b(),s("div",I,"ËºâÂÖ•‰∏≠...")):0===R.value.length?(b(),s("div",x,[e[5]||(e[5]=n("div",{class:"empty-icon"},"üè∑Ô∏è",-1)),e[6]||(e[6]=n("p",null,"Ê≠§ÂàÜÈ°ûÂ∞öÊú™Êñ∞Â¢û‰ªª‰ΩïÊ®ôÁ±§",-1)),n("button",{onClick:e[1]||(e[1]=a=>J.value=!0),class:"add-btn"},"Êñ∞Â¢ûÁ¨¨‰∏ÄÂÄãÊ®ôÁ±§")])):(b(),s("div",L,[(b(!0),s(c,null,o(R.value,a=>(b(),s("div",{key:a.id,class:"tag-card"},[n("div",P,[n("h4",null,u(a.name),1),n("p",T,"È°ûÂûãÔºö"+u(a.type),1)]),n("div",V,[n("button",{onClick:e=>(a=>{M.value=a,Q.value={name:a.name||"",type:a.type||H.value},K.value=!0})(a),class:"edit-btn"},"Á∑®ËºØ",8,q),n("button",{onClick:e=>(async a=>{if(confirm("Á¢∫ÂÆöË¶ÅÂà™Èô§Ê≠§Ê®ôÁ±§ÂóéÔºü"))try{await G.callAPI({table:"tag",action:"delete",data:{id:a}}),await f.fetchTagList()}catch(e){alert("Âà™Èô§Â§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶")}})(a.id),class:"delete-btn"},"Âà™Èô§",8,S)])]))),128))]))])])]),J.value||K.value?(b(),s("div",{key:0,class:"modal-overlay",onClick:X},[n("div",{class:"modal-content",onClick:e[4]||(e[4]=d(()=>{},["stop"]))},[n("div",U,[n("h2",null,u(J.value?"Êñ∞Â¢ûÊ®ôÁ±§":"Á∑®ËºØÊ®ôÁ±§"),1),n("button",{onClick:X,class:"close-btn"},"‚úï")]),n("form",{onSubmit:d(Y,["prevent"]),class:"tag-form"},[n("div",z,[e[9]||(e[9]=n("label",{for:"tag-name"},"Ê®ôÁ±§ÂêçÁ®± *",-1)),v(n("input",{id:"tag-name","onUpdate:modelValue":e[2]||(e[2]=a=>Q.value.name=a),type:"text",required:"",placeholder:"Ë´ãËº∏ÂÖ•Ê®ôÁ±§ÂêçÁ®±"},null,512),[[p,Q.value.name]])]),n("div",F,[e[10]||(e[10]=n("label",{for:"tag-type"},"Ê®ôÁ±§ÂàÜÈ°û",-1)),v(n("select",{id:"tag-type","onUpdate:modelValue":e[3]||(e[3]=a=>Q.value.type=a),required:""},[(b(),s(c,null,o(O,a=>n("option",{key:a.type,value:a.type},u(a.label),9,B)),64))],512),[[r,Q.value.type]])]),n("div",D,[n("button",{type:"button",onClick:X,class:"cancel-btn"},"ÂèñÊ∂à"),n("button",{type:"submit",class:"save-btn",disabled:!Q.value.name},"ÂÑ≤Â≠ò",8,E)])],32)])])):i("",!0)]))}}),[["__scopeId","data-v-782dc2b2"]]);export{G as default};
